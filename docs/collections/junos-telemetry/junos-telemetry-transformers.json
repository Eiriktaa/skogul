{
     "handlers": {
       "junos-telemetry": {
         "parser": "protobuf",
         "transformers": [
             "jtel-interfaceexp_stats",
             "jtel-interface_stats",
             "jtel-interface_info",
             "jtel-optics_diag",
             "jtel-interfaces_interface",
             "jtel-flatten",
             "jtel-remove",
             "jtel-extract_names",
             "jtel-extract_measurement_name",
             "jtel-extract_measurement_name2",
             "jtel-flatten_systemId"
         ],
         "sender": "default"
       }
     },
     "transformers": {
        "jtel-interfaceexp_stats": {
           "type": "split",
           "field": ["interfaceExp_stats"]
        },
        "jtel-interfaces_interface": {
           "type": "split",
           "field": ["interface"]
        },
        "jtel-interface_stats": {
           "type": "split",
           "field": ["interface_stats"]
        },
        "jtel-interface_info": {
           "type": "split",
           "field": ["interface_info"]
        },
        "jtel-optics_diag": {
           "type": "split",
           "field": ["Optics_diag"]
        },
        "jtel-flatten": {
           "type": "data",
           "flatten": [
              ["aggregation","state"],
              ["egress_queue_info"],
              ["egress_errors"],
              ["egress_stats"],
              ["ingress_errors"],
              ["ingress_stats"],
              ["egress_stats"],
              ["ingress_stats"],
              ["op_state"],
              ["optics_diag_stats"],
              ["optics_diag_stats__optics_lane_diag_stats"]
           ]
        },
        "jtel-remove": {
           "type": "data",
           "remove": [
              "aggregation",
              "egress_queue_info",
              "egress_errors",
              "egress_stats",
              "ingress_errors",
              "ingress_stats",
              "egress_stats",
              "ingress_stats",
              "op_state",
              "optics_diag_stats",
              "optics_diag_stats__optics_lane_diag_stats"
           ]
        },
        "jtel-extract_names": {
           "type": "metadata",
           "extractFromData": ["if_name", "parent_ae_name","name"]
        },
        "jtel-extract_measurement_name": {
           "type": "replace",
           "regex": "^([^:]*):/([^:]*)/:.*$",
           "source": "sensorName",
           "destination": "measurement",
           "replacement": "$2"
        },
        "jtel-extract_measurement_name2": {
           "type": "replace",
           "regex": "[^a-zA-Z]",
           "source": "measurement",
           "replacement": "_" 
        },
        "jtel-flatten_systemId": {
           "type": "replace",
           "regex": "-.*$",
           "source": "systemId"
        }
     }
}
